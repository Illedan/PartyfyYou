<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>

<body>
    <script>
        if (!window.console) console = {};
        console.log = console.log || function () { };
        var isLoaded = false;

        function httpGet(theUrl) {
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET", theUrl, false); // false for synchronous request
            xmlHttp.send(null);
            return xmlHttp.responseText;
        }
    function getPath() {
        
        return httpGet("http://localhost:1337/url");

    }
   
    function changeSrc() {
        if (!isLoaded) {
            document.getElementById('Myframe').src = getPath();
            isLoaded = true;

            setInterval(function () {
                loop();
            }, 1000);

        }


        function loop() {
            var newPath = getPath();
            var nowPlaying = document.getElementById('Myframe').src.toString();

            if (nowPlaying !== newPath) { // her er det fuckup :/
                console.log("inne i if");
                document.getElementById('Myframe').src = getPath();
            }

        }
    }
    </script>
    
    <iframe id="Myframe" onLoad="changeSrc();" src="about:blank" style="position:fixed; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%; border:none; margin:0; padding:0; overflow:hidden; z-index:999999;">
        Your browser doesn't support iframes
    </iframe>
</body>
</html>